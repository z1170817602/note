<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="./index.css">
  
</head>
<body>
  <div class="login">
    <h1>Login</h1>
    <form action="">
      <input type="text" placeholder="账号">
      <input type="text" placeholder="密码">
      <button>登陆</button>
    </form>
  </div>
  <script>
    let span=null
    let inTime,outTime
    // 不明白
    let isIn = true
    let isOut 
    let login = document.querySelector('.login')
    login.addEventListener('mouseenter', function(e){
      //不明白
      isOut = false
      if(isIn){
        inTime = new Date().getTime()

        span = document.createElement('span')
        login.appendChild(span)

        span.style.animation = 'in 0.5s ease-out forwards'

        let top = e.clientY - e.target.offsetTop
        let left = e.clientX - e.target.offsetLeft

        span.style.top = top+'px'
        span.style.left = left+'px'

        isIn=false
        isOut = true
      }



    })


    login.addEventListener('mouseleave', function(e){

      if(isOut){

        outTime = new Date().getTime()
        let passTime = outTime - inTime

        //保证每次in动画完成才执行离开语句
        if(passTime < 500){
          
          setTimeout(mouseleave, 500 - passTime)
        }else{
          mouseleave()
        }
    }

      function mouseleave(){
        span.style.animation = 'out 0.5s ease-out forwards'

        let top = e.clientY - e.target.offsetTop
        let left = e.clientX - e.target.offsetLeft

        span.style.top = top+'px'
        span.style.left = left+'px'

        setTimeout(function(){
          login.removeChild(span)
          isIn = true
        },500)
        
      }
    })
  </script>
</body>
</html>